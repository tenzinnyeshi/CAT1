<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChristUniveristy</title>
</head>
<style>
    body {
        margin: 0px;
        padding: 0px;
    }

    .navbar {
        text-align: center;
        color: white;
        background-color: #5a4ff6;
        padding: 2px;
    }

    .container {
        width: 1250px;
        height: 100%;
        /* border: 2px solid rgb(56, 55, 55); */
        padding: 33px ;
        background: rgb(71, 68, 68);
        padding-left: 15px;
        /* border: 2px solid red; */
    }

    .formitem {
        margin: 5px 12px;
        padding: 5px 5px;
        width: 400px;
        height: 25px;
        border-radius: 12px;
        text-align: center;
    }

    .formerror {
        color: red;
    }
    #formcenter{
        margin-left: 450px;
    }
</style>

<body>
    <nav class="navbar">
        <h1>Registration Form: Gateways 2022</h1>
        <p>Theme: TECHNOCOVID</p>
    </nav>
    <div class="container">
            <h2 style="text-align: center;margin-top: 53px; color: white;">Please fill the details below:</h2>
            <form name="myForm" onsubmit="return validateForm()" method="post" id="formcenter">
                <div id="name">
                    <input type="text" onkeypress="return  lockkb(event)" name="fname" placeholder="Enter Your Name"
                        class="formitem" required>
                    <br><b><span class="formerror"></span></b>
                </div>
                <div id="email">
                    <input type="Email" name="femail" placeholder="Enter Your Email" class="formitem" required>
                    <br><b><span class="formerror"></span></b>
                </div>
                <div id="branch">
                    <input type="text" name="fbranch" placeholder="Enter Your Branch" class="formitem" required>
                    <br><b><span class="formerror"></span></b>
                </div>
                <div id="college">
                    <input type="text" name="fcollege" placeholder="Enter Your College/University" class="formitem" required>
                    <br><b><span class="formerror"></span></b>
                </div>
                <div id="state">
                    <input type="text" name="fstate" placeholder="Enter Your State" class="formitem" required>
                    <br><b><span class="formerror"></span></b>
                </div>
                <div id="address">
                    <input type="text" name="faddress" placeholder="Enter Your address" class="formitem" required>
                    <br><b><span class="formerror"></span></b>
                </div>
                <div id="age">
                    <input type="number" name="fage" placeholder="Enter Your Age" class="formitem" required>
                    <br><b><span class="formerror"></span></b>
                </div>
                <div id="phone">
                    <input type="number" name="fphone" placeholder="Enter Your Phone Number" class="formitem" required>
                    <br><b><span class="formerror"></span></b>
                </div>
                <div id="username">
                    <input type="text" name="fusername" placeholder="Enter Your Username" class="formitem"  required>
                    <br><b><span class="formerror"></span></b>
                </div>
                <div id="password">
                    <input name="fpassword" type="password" placeholder="Enter Your Password" class="formitem" required>
                    <br><b><span class="formerror"></span></b>
                </div>
                <input type="submit" class="formitem" onsubmit="setUsername(), setEmail(), storeItems()"style="background: green;color: white;" value="Submit">
            </form>

            <button type="button" class="formitem"style="background: green;color: white;"onclick="loadXMLDoc()">
            Show Registered Students
        </button>
    </div>
    <script>
        function clearErrors() {
            errors = document.getElementsByClassName('formerror');
            for (let item of errors) {
                item.innerHTML = "";
            }
        }
        function seterror(id, error) {
            element = document.getElementById(id);
            element.getElementsByClassName('formerror')[0].innerHTML = error;
        }
        function validateForm() {
            var returnVal = true;
            clearErrors();

            var name = document.forms['myForm']['fname'].value;
            if (name.length < 5) {
                seterror("name", "*Length of name is too short");
                returnVal = false;
            }

            var email = document.forms['myForm']['femail'].value;
            if (email.length > 30) {
                seterror("email", "*Length of email is too long");
                returnVal = false;
            }
            if (email.search(/([a-z0-9\.\-_]{5,25})@christuniversity.in$/) < 0) {
                seterror("email", "*Domain name should only be christuniversity.in");
                returnVal = false;
            }
            var phone = document.forms['myForm']['fphone'].value;
            if (phone.length != 10) {
                seterror("phone", "*Length of phone should be 10");
                returnVal = false;
            }

            var password = document.forms['myForm']['fpassword'].value;
            if (password.length < 8) {
                seterror("password", "*Your password must be at least 8 characters");
                returnVal = false;
            }
            if (password.search(/[a-z]/) < 0) {
                seterror("password", "*Your password must contain at least one letter in lower case.");
                returnVal = false;
            }
            if (password.search(/[A-Z]/) < 0) {
                seterror("password", "*Your password must contain at least one letter in upper case.");
                returnVal = false;
            }
            if (password.search(/[0-9]/) < 0) {
                seterror("password", "*Your password must contain at least one digit.");
                returnVal = false;
            }
            if (password.search(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/) < 0) {
                seterror("password", "*Your password must contain at least one Special Character.");
                returnVal = false;
            }
            var age = document.forms['myForms']['fage'].value;
            if (age.search(/[^-\d+$]/)) {
                seterror("age", "*Age cannot be negative");
                returnVal = false;
            }
            return returnVal;
        }
        function lockkb(event) {
            let code = event.which;
            if (code > 47 && code < 58)
                return false;
            else
                return true;
        }
    
        function setUsername()
        {
            var value = document.getElementById("username").value;
            
                document.cookie="username="+value+";expires=Fri,2 Feb 2022 01:00:00 UTC;";
        }
        function setEmail()
        {
            var value = document.getElementById("email").value;
            
                document.cookie="email="+value+";expires=Fri,2 Feb 2022 01:00:00 UTC;";
        }
        function storeItems()
        {
            var myphone = document.getElementById("phone").value;
            localStorage.setItem("phone",myphone);
            var myemail = document.getElementById("email").value;
            localStorage.setItem("email",myphone);
        }

        function loadXMLDoc() {
            // XMLHttpRequest() - to load an XML documents (request data from the server)
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function () {
  
                // Request finished and response 
                // is ready and Status is "OK"
                if (this.readyState == 4 && this.status == 200) {
                    studentDetails(this);
                }
            };
            // registration.xml is the external xml file
            xmlhttp.open("GET", "registration.xml", true);
            xmlhttp.send();
        }
        function studentDetails(xml) {
            var i;
            var xmlDoc = xml.responseXML;
            var table = 
                `<tr>
                    <th>Name</th>
                    <th>University</th>
                    <th>Phone</th>
                    <th>Email</th>
                </tr>`;
                
            var x = xmlDoc.getElementsByTagName("computer-science");
            
  
            // Start to fetch the data by using TagName 
            for (i = 0; i < x.length; i++) {
                table += "<tr><td>" +
                    x[i].getElementsByTagName("stu-name")[0]
                    .childNodes[0].nodeValue + "</td><td>" +
                    x[i].getElementsByTagName("stu-university")[0]
                    .childNodes[0].nodeValue + "</td><td>" +
                    x[i].getElementsByTagName("stu-phone")[0]
                    .childNodes[0].nodeValue + "</td><td>" +
                    x[i].getElementsByTagName("stu-email")[0]
                    .childNodes[0].nodeValue + "</td><td>";
            }
            // Print the xml data in table form
            document.getElementById("id").innerHTML = table;
        }
    </script>
</body>

</html>